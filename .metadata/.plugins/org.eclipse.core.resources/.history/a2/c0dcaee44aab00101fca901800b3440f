package com.university.lms.service;

import com.university.lms.entity.ExamGrade;
import com.university.lms.repository.ExamGradeRepository;
import com.university.lms.repository.ExamApplicationRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import java.util.List;

@Service
public class ExamGradeService {
    @Autowired
    private ExamGradeRepository examGradeRepository;
    @Autowired
    private ExamApplicationRepository examAplicationRepository;

    public ExamGrade createExamGrade(Long examApplicationId, float grade, int numberOfTakenExams) {
        if (!examAplicationRepository.existsById(examApplicationId)) {
            throw new IllegalArgumentException("Exam application not found");
        }
        ExamGrade examGrade = new ExamGrade(examAplicationRepository.getOne(examApplicationId), grade, numberOfTakenExams);
        return examGradeRepository.save(examGrade);
    }

    public List<ExamGrade> getExamGradesByExamApplicationId(Long examApplicationId) {
        return examGradeRepository.findByExamApplication(examAplicationRepository.getOne(examApplicationId));
    }

    public List<ExamGrade> getAllExamGrades() {
        return examGradeRepository.findAll();
    }

    public void deleteExamGrade(Long examGradeId) {
        examGradeRepository.deleteById(examGradeId);
    }
}